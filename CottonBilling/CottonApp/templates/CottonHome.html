{% extends "index.html" %}

{% block content %}
<style>
  /* Make table look like Excel sheet */
  .excel-table {
    border-collapse: collapse !important;
    width: 100%;
    background-color: #fff;
  }
  .excel-table th, .excel-table td {
    border: 1px solid #444 !important;
    padding: 6px 8px !important;
    font-size: 14px;
    vertical-align: middle !important;
    text-align: center !important;
  }
  .excel-table th {
    background-color: #2c3e50 !important;
    color: white;
    font-weight: bold;
  }
  .excel-table tr:nth-child(even) {
    background-color: #f2f2f2;
  }
  .excel-table tr:hover {
    background-color: #e3f2fd;
  }
  .table-container {
    overflow-x: auto;
  }
  .card {
    border-radius: 12px;
  }
</style>





<button class="bg-amber-400 absolute right-10 rounded-2xl px-10 p-2"><a href='{% url "Add Cotton" %}'>Add Cotton Entry</a></button>
<div class="container mt-5">
  <div class="card shadow-lg border-0 pt-15">

    <div class="card-body bg-light">
      {% if cotton_entries %}
        <div class="table-container">
          <table class="excel-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Farmer Name</th>
                <th>Contact No.</th>
                <th>Address</th>
                <th>Driver Name</th>
                <th>Vehicle No.</th>
                <th>Mobile No.</th>
                <th>Loaded (kg)</th>
                <th>Unloaded (kg)</th>
                <th>Net (kg)</th>
                <th>Ginning</th>
                <th>Market Rate (₹)</th>
                <th>Bedding Rate (₹)</th>
                <th>Total (₹)</th>
                <th>Advance (₹)</th>
                <th>Balance (₹)</th>
                <th>Date of Entry</th>
                <th>Date of Unloading</th>
                <th>Payment</th>
                <th>Receipt</th>
              </tr>
            </thead>

            <tbody>
              {% for item in cotton_entries %}
              <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.contact_number }}</td>
                <td>{{ item.address|default:"-" }}</td>
                <td>{{ item.driver_name }}</td>
                <td>{{ item.vehicle_number }}</td>
                <td>{{ item.mobile_number }}</td>
                <td>{{ item.loaded_vehicle_weight }}</td>
                <td>{{ item.unloading_vehicle_weight }}</td>
                <td>{{ item.net_weight }}</td>
                <td>{{ item.ginning_name }}</td>
                <td>{{ item.market_rate }}</td>
                <td>{{ item.bedding_rate }}</td>
                <td class="fw-bold text-success">{{ item.total_amount }}</td>
                <td>{{ item.advance_paid }}</td>
                <td class="fw-bold {% if item.balance_amount > 0 %}text-danger{% else %}text-success{% endif %}">
                  {{ item.balance_amount }}
                </td>
                <td>{{ item.date_of_entry|date:"d-m-Y H:i" }}</td>
                <td>{{ item.date_of_unloading|date:"d-m-Y H:i" }}</td>
                <td>
                  {% if item.is_paid %}
                    <span class="badge bg-success">Paid</span>
                  {% else %}
                    <span class="badge bg-danger">Unpaid</span>
                  {% endif %}
                </td>
                <td>
                  {% comment %} <a href="{% url 'download_receipt' item.id %}" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-download"></i> Download
                  </a> {% endcomment %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <div class="alert alert-info text-center fs-5 mb-0 rounded-3">
          No Cotton Data Available
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
